{"ast":null,"code":"import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import _defineProperty from\"/Users/timurmarokko/Desktop/dev/react-mesto-auth/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/Users/timurmarokko/Desktop/dev/react-mesto-auth/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/timurmarokko/Desktop/dev/react-mesto-auth/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import{Link,useHistory}from\"react-router-dom\";import InfoToolTip from\"./InfoTooltip\";var Register=function Register(props){var _useState=useState({email:'',password:''}),_useState2=_slicedToArray(_useState,2),data=_useState2[0],setData=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),popupMessage=_useState4[0],setPopupMessage=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),isRegisterPopup=_useState6[0],setIsRegisterPopup=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),submitStatus=_useState8[0],setSubmitStatus=_useState8[1];var history=useHistory();useEffect(function(){if(props.loggedIn)history.push(\"/\");},[props.loggedIn,history]);function onChange(e){var _e$target=e.target,name=_e$target.name,value=_e$target.value;setData(_objectSpread(_objectSpread({},data),{},_defineProperty({},name,value)));}function onClose(){setIsRegisterPopup(false);if(submitStatus){history.push(\"/sign-in\");}}function onSubmit(e){e.preventDefault();props.onRegister(data.email,data.password).then(function(){setSubmitStatus(true);setPopupMessage(\"Вы успешно зарегистрировались!\");}).catch(function(){setPopupMessage(\"Что-то пошло не так! Попробуйте ещё раз.\");}).finally(function(){setIsRegisterPopup(true);});}return/*#__PURE__*/_jsxs(\"div\",{className:\"register\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"register__heading\",children:\"\\u0420\\u0435\\u0433\\u0438\\u0441\\u0442\\u0440\\u0430\\u0446\\u0438\\u044F\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:onSubmit,className:\"register__form\",autoComplete:\"off\",children:[/*#__PURE__*/_jsx(\"input\",{id:\"email\",name:\"email\",type:\"email\",value:data.email,onChange:onChange,className:\"register__input\",placeholder:\"Email\"}),/*#__PURE__*/_jsx(\"input\",{id:\"password\",name:\"password\",type:\"password\",value:data.password,onChange:onChange,className:\"register__input\",placeholder:\"\\u041F\\u0430\\u0440\\u043E\\u043B\\u044C\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"register__submit-button\",children:\"\\u0417\\u0430\\u0440\\u0435\\u0433\\u0438\\u0441\\u0442\\u0440\\u0438\\u0440\\u043E\\u0432\\u0430\\u0442\\u044C\\u0441\\u044F\"})]}),/*#__PURE__*/_jsxs(\"p\",{className:\"register__title\",children:[\"\\u0423\\u0436\\u0435 \\u0440\\u0435\\u0433\\u0438\\u0441\\u0442\\u0440\\u0438\\u0440\\u043E\\u0432\\u0430\\u043B\\u0438\\u0441\\u044C?\",/*#__PURE__*/_jsx(Link,{className:\"register__link\",to:\"/sign-in\",children:\"\\u0412\\u043E\\u0439\\u0442\\u0438\"})]}),/*#__PURE__*/_jsx(InfoToolTip,{isOpen:isRegisterPopup,onClose:onClose,name:\"register\",status:submitStatus,children:popupMessage})]});};export default Register;","map":{"version":3,"sources":["/Users/timurmarokko/Desktop/dev/react-mesto-auth/src/components/Register.js"],"names":["React","useState","useEffect","Link","useHistory","InfoToolTip","Register","props","email","password","data","setData","popupMessage","setPopupMessage","isRegisterPopup","setIsRegisterPopup","submitStatus","setSubmitStatus","history","loggedIn","push","onChange","e","target","name","value","onClose","onSubmit","preventDefault","onRegister","then","catch","finally"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { Link, useHistory } from \"react-router-dom\";\nimport InfoToolTip from \"./InfoTooltip\";\n\nconst Register = (props) => {\n    const [ data, setData ] = useState({\n        email: '',\n        password: '',\n    })\n\n    const [popupMessage, setPopupMessage] = useState(\"\");\n    const [isRegisterPopup, setIsRegisterPopup] = useState(false);\n    const [submitStatus, setSubmitStatus] = useState(false);\n    const history = useHistory();\n\n    useEffect(() => {\n        if (props.loggedIn) history.push(\"/\");\n    }, [props.loggedIn, history]);\n\n    function onChange(e) {\n        const { name, value } = e.target\n        setData({\n            ...data,\n            [name]: value\n        })\n    }\n\n    function onClose() {\n        setIsRegisterPopup(false);\n        if (submitStatus) {\n            history.push(\"/sign-in\");\n        }\n    }\n\n    function onSubmit(e) {\n        e.preventDefault();\n        props\n            .onRegister(data.email, data.password)\n            .then(() => {\n                setSubmitStatus(true);\n                setPopupMessage(\"Вы успешно зарегистрировались!\");\n            })\n            .catch(() => {\n                setPopupMessage(\"Что-то пошло не так! Попробуйте ещё раз.\");\n            })\n            .finally(() => {\n                setIsRegisterPopup(true);\n            });\n    }\n\n    return (\n        <div className=\"register\">\n            <h2 className=\"register__heading\">Регистрация</h2>\n            <form\n                onSubmit={onSubmit}\n                className=\"register__form\"\n                autoComplete=\"off\"\n            >\n                <input\n                    id=\"email\"\n                    name=\"email\"\n                    type=\"email\"\n                    value={data.email}\n                    onChange={onChange}\n                    className=\"register__input\"\n                    placeholder=\"Email\"\n                />\n                <input\n                    id=\"password\"\n                    name=\"password\"\n                    type=\"password\"\n                    value={data.password}\n                    onChange={onChange}\n                    className=\"register__input\"\n                    placeholder=\"Пароль\"\n                />\n                <button type=\"submit\" className=\"register__submit-button\">\n                    Зарегистрироваться\n                </button>\n            </form>\n            <p className=\"register__title\">\n                Уже регистрировались?\n                <Link className=\"register__link\" to=\"/sign-in\">\n                    Войти\n                </Link>\n            </p>\n            <InfoToolTip\n                isOpen={isRegisterPopup}\n                onClose={onClose}\n                name=\"register\"\n                status={submitStatus}\n            >\n                {popupMessage}\n            </InfoToolTip>\n        </div>\n    );\n};\n\nexport default Register;\n"]},"metadata":{},"sourceType":"module"}