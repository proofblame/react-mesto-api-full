{"ast":null,"code":"import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import _defineProperty from\"/Users/timurmarokko/Desktop/dev/react-mesto-auth/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/Users/timurmarokko/Desktop/dev/react-mesto-auth/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/timurmarokko/Desktop/dev/react-mesto-auth/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useState,useEffect}from\"react\";import{useHistory}from\"react-router-dom\";import InfoToolTip from\"./InfoTooltip\";function Login(props){var _useState=useState({email:\"\",password:\"\"}),_useState2=_slicedToArray(_useState,2),data=_useState2[0],setData=_useState2[1];// const [email, setEmail] = useState(\"\");\n// const [password, setPassword] = useState(\"\");\nvar _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),popupMessage=_useState4[0],setPopupMessage=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),isLoginPopup=_useState6[0],setIsLoginPopup=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),submitStatus=_useState8[0],setSubmitStatus=_useState8[1];var history=useHistory();useEffect(function(){if(props.loggedIn)history.push(\"/\");},[props.loggedIn,history]);function onChange(e){var _e$target=e.target,name=_e$target.name,value=_e$target.value;setData(_objectSpread(_objectSpread({},data),{},_defineProperty({},name,value)));}// function onChangeEmail(e) {\n//     setEmail(e.target.value);\n// }\n// function onChangePassword(e) {\n//     setPassword(e.target.value);\n// }\nfunction onClose(){setIsLoginPopup(false);if(submitStatus){props.checkToken();}}function onSubmit(e){e.preventDefault();props.onLogin(data.email,data.password).then(function(){setSubmitStatus(true);setPopupMessage(\"Вы успешно вошли!\");}).catch(function(e){setPopupMessage(\"Что-то пошло не так! Попробуйте ещё раз.\");}).finally(function(){setIsLoginPopup(true);});}return/*#__PURE__*/_jsxs(\"div\",{className:\"register\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"register__heading\",children:\"\\u0412\\u0445\\u043E\\u0434\"}),/*#__PURE__*/_jsxs(\"form\",{className:\"register__form\",onSubmit:onSubmit,children:[/*#__PURE__*/_jsx(\"input\",{type:\"email\",className:\"register__input\",placeholder:\"Email\",value:data.email,onChange:onChange}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",className:\"register__input\",placeholder:\"\\u041F\\u0430\\u0440\\u043E\\u043B\\u044C\",value:data.password,onChange:onChange}),/*#__PURE__*/_jsx(\"button\",{className:\"register__submit-button\",children:\"\\u0412\\u043E\\u0439\\u0442\\u0438\"})]}),/*#__PURE__*/_jsx(InfoToolTip,{isOpen:isLoginPopup,onClose:onClose,name:\"login\",status:submitStatus,children:popupMessage})]});}export default Login;","map":{"version":3,"sources":["/Users/timurmarokko/Desktop/dev/react-mesto-auth/src/components/Login.js"],"names":["useState","useEffect","useHistory","InfoToolTip","Login","props","email","password","data","setData","popupMessage","setPopupMessage","isLoginPopup","setIsLoginPopup","submitStatus","setSubmitStatus","history","loggedIn","push","onChange","e","target","name","value","onClose","checkToken","onSubmit","preventDefault","onLogin","then","catch","finally"],"mappings":"8kBAAA,OAASA,QAAT,CAAmBC,SAAnB,KAAoC,OAApC,CACA,OAASC,UAAT,KAA2B,kBAA3B,CACA,MAAOC,CAAAA,WAAP,KAAwB,eAAxB,CAEA,QAASC,CAAAA,KAAT,CAAeC,KAAf,CAAsB,eACML,QAAQ,CAAC,CAC7BM,KAAK,CAAE,EADsB,CAE7BC,QAAQ,CAAE,EAFmB,CAAD,CADd,wCACXC,IADW,eACLC,OADK,eAKlB;AACA;AANkB,eAOsBT,QAAQ,CAAC,EAAD,CAP9B,yCAOXU,YAPW,eAOGC,eAPH,8BAQsBX,QAAQ,CAAC,KAAD,CAR9B,yCAQXY,YARW,eAQGC,eARH,8BASsBb,QAAQ,CAAC,KAAD,CAT9B,yCASXc,YATW,eASGC,eATH,eAUlB,GAAMC,CAAAA,OAAO,CAAGd,UAAU,EAA1B,CAEAD,SAAS,CAAC,UAAM,CACZ,GAAII,KAAK,CAACY,QAAV,CAAoBD,OAAO,CAACE,IAAR,CAAa,GAAb,EACvB,CAFQ,CAEN,CAACb,KAAK,CAACY,QAAP,CAAiBD,OAAjB,CAFM,CAAT,CAIA,QAASG,CAAAA,QAAT,CAAkBC,CAAlB,CAAqB,eACOA,CAAC,CAACC,MADT,CACTC,IADS,WACTA,IADS,CACHC,KADG,WACHA,KADG,CAEjBd,OAAO,gCACAD,IADA,wBAEFc,IAFE,CAEKC,KAFL,GAAP,CAIH,CAED;AACA;AACA;AAEA;AACA;AACA;AAEA,QAASC,CAAAA,OAAT,EAAmB,CACfX,eAAe,CAAC,KAAD,CAAf,CACA,GAAIC,YAAJ,CAAkB,CACdT,KAAK,CAACoB,UAAN,GACH,CACJ,CAED,QAASC,CAAAA,QAAT,CAAkBN,CAAlB,CAAqB,CACjBA,CAAC,CAACO,cAAF,GACAtB,KAAK,CACAuB,OADL,CACapB,IAAI,CAACF,KADlB,CACyBE,IAAI,CAACD,QAD9B,EAEKsB,IAFL,CAEU,UAAM,CACRd,eAAe,CAAC,IAAD,CAAf,CACAJ,eAAe,CAAC,mBAAD,CAAf,CACH,CALL,EAMKmB,KANL,CAMW,SAACV,CAAD,CAAO,CACVT,eAAe,CAAC,0CAAD,CAAf,CACH,CARL,EASKoB,OATL,CASa,UAAM,CACXlB,eAAe,CAAC,IAAD,CAAf,CACH,CAXL,EAYH,CAED,mBACI,aAAK,SAAS,CAAC,UAAf,wBACI,WAAI,SAAS,CAAC,mBAAd,sCADJ,cAEI,cAAM,SAAS,CAAC,gBAAhB,CAAiC,QAAQ,CAAEa,QAA3C,wBACI,cACI,IAAI,CAAC,OADT,CAEI,SAAS,CAAC,iBAFd,CAGI,WAAW,CAAC,OAHhB,CAII,KAAK,CAAElB,IAAI,CAACF,KAJhB,CAKI,QAAQ,CAAEa,QALd,EADJ,cAQI,cACI,IAAI,CAAC,UADT,CAEI,SAAS,CAAC,iBAFd,CAGI,WAAW,CAAC,sCAHhB,CAII,KAAK,CAAEX,IAAI,CAACD,QAJhB,CAKI,QAAQ,CAAEY,QALd,EARJ,cAeI,eAAQ,SAAS,CAAC,yBAAlB,4CAfJ,GAFJ,cAmBI,KAAC,WAAD,EACI,MAAM,CAAEP,YADZ,CAEI,OAAO,CAAEY,OAFb,CAGI,IAAI,CAAC,OAHT,CAII,MAAM,CAAEV,YAJZ,UAMKJ,YANL,EAnBJ,GADJ,CA8BH,CAED,cAAeN,CAAAA,KAAf","sourcesContent":["import { useState, useEffect } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport InfoToolTip from \"./InfoTooltip\";\n\nfunction Login(props) {\n    const [data, setData] = useState({\n        email: \"\",\n        password: \"\",\n    });\n    // const [email, setEmail] = useState(\"\");\n    // const [password, setPassword] = useState(\"\");\n    const [popupMessage, setPopupMessage] = useState(\"\");\n    const [isLoginPopup, setIsLoginPopup] = useState(false);\n    const [submitStatus, setSubmitStatus] = useState(false);\n    const history = useHistory();\n\n    useEffect(() => {\n        if (props.loggedIn) history.push(\"/\");\n    }, [props.loggedIn, history]);\n\n    function onChange(e) {\n        const { name, value } = e.target;\n        setData({\n            ...data,\n            [name]: value\n        });\n    }\n\n    // function onChangeEmail(e) {\n    //     setEmail(e.target.value);\n    // }\n\n    // function onChangePassword(e) {\n    //     setPassword(e.target.value);\n    // }\n\n    function onClose() {\n        setIsLoginPopup(false);\n        if (submitStatus) {\n            props.checkToken();\n        }\n    }\n\n    function onSubmit(e) {\n        e.preventDefault();\n        props\n            .onLogin(data.email, data.password)\n            .then(() => {\n                setSubmitStatus(true);\n                setPopupMessage(\"Вы успешно вошли!\");\n            })\n            .catch((e) => {\n                setPopupMessage(\"Что-то пошло не так! Попробуйте ещё раз.\");\n            })\n            .finally(() => {\n                setIsLoginPopup(true);\n            });\n    }\n\n    return (\n        <div className=\"register\">\n            <h2 className=\"register__heading\">Вход</h2>\n            <form className=\"register__form\" onSubmit={onSubmit}>\n                <input\n                    type=\"email\"\n                    className=\"register__input\"\n                    placeholder=\"Email\"\n                    value={data.email}\n                    onChange={onChange}\n                />\n                <input\n                    type=\"password\"\n                    className=\"register__input\"\n                    placeholder=\"Пароль\"\n                    value={data.password}\n                    onChange={onChange}\n                />\n                <button className=\"register__submit-button\">Войти</button>\n            </form>\n            <InfoToolTip\n                isOpen={isLoginPopup}\n                onClose={onClose}\n                name=\"login\"\n                status={submitStatus}\n            >\n                {popupMessage}\n            </InfoToolTip>\n        </div>\n    );\n}\n\nexport default Login;\n"]},"metadata":{},"sourceType":"module"}