{"ast":null,"code":"import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import _slicedToArray from\"/Users/timurmarokko/Desktop/dev/react-mesto-auth/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import{Link,useHistory}from\"react-router-dom\";import InfoToolTip from\"./InfoTooltip\";var Register=function Register(props){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),email=_useState2[0],setEmail=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),popupMessage=_useState6[0],setPopupMessage=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),isRegisterPopup=_useState8[0],setIsRegisterPopup=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),submitStatus=_useState10[0],setSubmitStatus=_useState10[1];var history=useHistory();useEffect(function(){if(props.loggedIn)history.push(\"/\");},[props.loggedIn,history]);function onChangeEmail(e){setEmail(e.target.value);}function onChangePassword(e){setPassword(e.target.value);}function onClose(){setIsRegisterPopup(false);if(submitStatus){history.push(\"/sign-in\");}}function onSubmit(e){e.preventDefault();props.onRegister(email,password).then(function(){setSubmitStatus(true);setPopupMessage(\"Вы успешно зарегистрировались!\");}).catch(function(e){switch(e.message){case'The \"email\" field is required':setPopupMessage('Поле \"Email\" должны быть заполенено');break;case'Поле \"password\" должно быть заполнено':setPopupMessage('Поле \"Пароль\" должны быть заполенено');break;case'The \"email\" field must be a valid email address':setPopupMessage(\"Необходимо ввести валидный Email\");break;case\"Пользователь с таким email уже зарегистрирован\":setPopupMessage(\"Пользователь с таким email уже зарегистрирован\");break;default:setPopupMessage(\"Что-то пошло не так! Попробуйте ещё раз.\");}}).finally(function(){setIsRegisterPopup(true);});}return/*#__PURE__*/_jsxs(\"div\",{className:\"register\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"register__heading\",children:\"\\u0420\\u0435\\u0433\\u0438\\u0441\\u0442\\u0440\\u0430\\u0446\\u0438\\u044F\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:onSubmit,className:\"register__form\",autoComplete:\"off\",children:[/*#__PURE__*/_jsx(\"input\",{id:\"email\",name:\"email\",type:\"email\",value:email,onChange:onChangeEmail,className:\"register__input\",placeholder:\"Email\"}),/*#__PURE__*/_jsx(\"input\",{id:\"password\",name:\"password\",type:\"password\",value:password,onChange:onChangePassword,className:\"register__input\",placeholder:\"\\u041F\\u0430\\u0440\\u043E\\u043B\\u044C\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"register__submit-button\",children:\"\\u0417\\u0430\\u0440\\u0435\\u0433\\u0438\\u0441\\u0442\\u0440\\u0438\\u0440\\u043E\\u0432\\u0430\\u0442\\u044C\\u0441\\u044F\"})]}),/*#__PURE__*/_jsxs(\"p\",{className:\"register__title\",children:[\"\\u0423\\u0436\\u0435 \\u0440\\u0435\\u0433\\u0438\\u0441\\u0442\\u0440\\u0438\\u0440\\u043E\\u0432\\u0430\\u043B\\u0438\\u0441\\u044C?\",/*#__PURE__*/_jsx(Link,{className:\"register__link\",to:\"/sign-in\",children:\"\\u0412\\u043E\\u0439\\u0442\\u0438\"})]}),/*#__PURE__*/_jsx(InfoToolTip,{isOpen:isRegisterPopup,onClose:onClose,name:\"register\",status:submitStatus,children:popupMessage})]});};export default Register;","map":{"version":3,"sources":["/Users/timurmarokko/Desktop/dev/react-mesto-auth/src/components/Register.js"],"names":["React","useState","useEffect","Link","useHistory","InfoToolTip","Register","props","email","setEmail","password","setPassword","popupMessage","setPopupMessage","isRegisterPopup","setIsRegisterPopup","submitStatus","setSubmitStatus","history","loggedIn","push","onChangeEmail","e","target","value","onChangePassword","onClose","onSubmit","preventDefault","onRegister","then","catch","message","finally"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { Link, useHistory } from \"react-router-dom\";\nimport InfoToolTip from \"./InfoTooltip\";\n\nconst Register = (props) => {\n    const [email, setEmail] = useState(\"\");\n    const [password, setPassword] = useState(\"\");\n    const [popupMessage, setPopupMessage] = useState(\"\");\n    const [isRegisterPopup, setIsRegisterPopup] = useState(false);\n    const [submitStatus, setSubmitStatus] = useState(false);\n    const history = useHistory();\n\n    useEffect(() => {\n        if (props.loggedIn) history.push(\"/\");\n    }, [props.loggedIn, history]);\n\n    function onChangeEmail(e) {\n        setEmail(e.target.value);\n    }\n\n    function onChangePassword(e) {\n        setPassword(e.target.value);\n    }\n\n    function onClose() {\n        setIsRegisterPopup(false);\n        if (submitStatus) {\n            history.push(\"/sign-in\");\n        }\n    }\n\n    function onSubmit(e) {\n        e.preventDefault();\n        props\n            .onRegister(email, password)\n            .then(() => {\n                setSubmitStatus(true);\n                setPopupMessage(\"Вы успешно зарегистрировались!\");\n            })\n            .catch((e) => {\n                switch (e.message) {\n                    case 'The \"email\" field is required':\n                        setPopupMessage('Поле \"Email\" должны быть заполенено');\n                        break;\n                    case 'Поле \"password\" должно быть заполнено':\n                        setPopupMessage('Поле \"Пароль\" должны быть заполенено');\n                        break;\n                    case 'The \"email\" field must be a valid email address':\n                        setPopupMessage(\"Необходимо ввести валидный Email\");\n                        break;\n                    case \"Пользователь с таким email уже зарегистрирован\":\n                        setPopupMessage(\n                            \"Пользователь с таким email уже зарегистрирован\"\n                        );\n                        break;\n                    default:\n                        setPopupMessage(\n                            \"Что-то пошло не так! Попробуйте ещё раз.\"\n                        );\n                }\n            })\n            .finally(() => {\n                setIsRegisterPopup(true);\n            });\n    }\n\n    return (\n        <div className=\"register\">\n            <h2 className=\"register__heading\">Регистрация</h2>\n            <form\n                onSubmit={onSubmit}\n                className=\"register__form\"\n                autoComplete=\"off\"\n            >\n                <input\n                    id=\"email\"\n                    name=\"email\"\n                    type=\"email\"\n                    value={email}\n                    onChange={onChangeEmail}\n                    className=\"register__input\"\n                    placeholder=\"Email\"\n                />\n                <input\n                    id=\"password\"\n                    name=\"password\"\n                    type=\"password\"\n                    value={password}\n                    onChange={onChangePassword}\n                    className=\"register__input\"\n                    placeholder=\"Пароль\"\n                />\n                <button type=\"submit\" className=\"register__submit-button\">\n                    Зарегистрироваться\n                </button>\n            </form>\n            <p className=\"register__title\">\n                Уже регистрировались?\n                <Link className=\"register__link\" to=\"/sign-in\">\n                    Войти\n                </Link>\n            </p>\n            <InfoToolTip\n                isOpen={isRegisterPopup}\n                onClose={onClose}\n                name=\"register\"\n                status={submitStatus}\n            >\n                {popupMessage}\n            </InfoToolTip>\n        </div>\n    );\n};\n\nexport default Register;\n"]},"metadata":{},"sourceType":"module"}