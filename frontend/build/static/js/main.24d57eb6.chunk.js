(this["webpackJsonpmesto-react"]=this["webpackJsonpmesto-react"]||[]).push([[0],{31:function(e,t,n){},37:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n(1),o=n.n(c),s=n(22),i=n.n(s),r=(n(31),n(24)),u=n(3),l=n(2),p=n(4),d=n(8),j=n.p+"static/media/logo.a307e1c4.svg";var b=function(e){return Object(a.jsxs)("header",{className:"header section",children:[Object(a.jsx)("img",{className:"header__logo",src:j,alt:"\u041b\u043e\u0433\u043e\u0442\u0438\u043f Mesto Russia"}),Object(a.jsxs)(p.d,{children:[Object(a.jsx)(p.b,{exact:!0,path:"/sign-in",children:Object(a.jsx)(d.b,{className:"header__link",to:"/sign-up",children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"})}),Object(a.jsx)(p.b,{exact:!0,path:"/sign-up",children:Object(a.jsx)(d.b,{className:"header__link",to:"/sign-in",children:"\u0412\u043e\u0439\u0442\u0438"})}),Object(a.jsx)(p.b,{path:"/",children:Object(a.jsxs)("div",{className:"header__right-block",children:[e.loggedIn&&Object(a.jsx)("p",{className:"header__email",children:e.email}),e.email&&Object(a.jsx)(d.b,{className:"header__sign-out",to:"/sign-up",onClick:e.onSignOut,children:"\u0412\u044b\u0439\u0442\u0438"})]})})]})]})},m=o.a.createContext();var h=function(e){var t=e.card,n=e.onCardClick,c=e.onCardLike,s=e.onConfirmDelete,i=o.a.useContext(m),r=t.owner===i._id,u="".concat(r?"element__delete-button buttons":"element__delete-button_hidden"),l=t.likes.some((function(e){return e===i._id})),p="element__like-button buttons ".concat(l?"element__like-button_active":"");return Object(a.jsx)("li",{className:"elements__item",children:Object(a.jsxs)("figure",{className:"element",children:[Object(a.jsx)("img",{src:t.link,alt:t.name,className:"element__image",onClick:function(){n(t)}}),Object(a.jsxs)("div",{className:"element__body",children:[Object(a.jsx)("p",{className:"element__figcaption section__subtitle",children:t.name}),Object(a.jsxs)("div",{className:"element__like-group",children:[Object(a.jsx)("button",{className:p,type:"button",onClick:function(){c(t)}}),Object(a.jsx)("div",{className:"element__like-count",children:t.likes.length})]})]}),Object(a.jsx)("button",{className:u,type:"button",onClick:function(){s(t)}})]})})},f=n.p+"static/media/edit-avatar.a086f758.svg";var O=function(e){var t=e.onEditProfile,n=e.onAddPlace,c=e.onEditAvatar,s=e.onCardClick,i=e.cards,r=e.onCardLike,u=e.onConfirmDelete,l=(e.handleChangeName,o.a.useContext(m)),p=i.map((function(e){return Object(a.jsx)(h,{card:e,onCardClick:s,onCardLike:r,onConfirmDelete:u},e._id)}));return Object(a.jsxs)("main",{className:"content section section__content",children:[Object(a.jsxs)("section",{className:"profile section__profile",children:[Object(a.jsxs)("div",{className:"profile__wrap",children:[Object(a.jsx)("img",{src:l.avatar,alt:l.name,className:"profile__avatar"}),Object(a.jsx)("img",{src:f,alt:"\u0421\u043c\u0435\u043d\u0430 \u0430\u0432\u0430\u0442\u0430\u0440\u0430",className:"profile__avatar-edit",onClick:c})]}),Object(a.jsxs)("div",{className:"profile__info",children:[Object(a.jsx)("h1",{className:"profile__author section__title",children:l.name}),Object(a.jsx)("button",{type:"button",className:"profile__edit-button buttons",onClick:t}),Object(a.jsx)("p",{className:"profile__author-status section__subtitle",children:l.about})]}),Object(a.jsx)("button",{type:"button",className:"profile__add-button buttons",onClick:n})]}),Object(a.jsx)("section",{className:"elements",children:Object(a.jsx)("ul",{className:"elements__list",children:p})})]})};var _=function(){return Object(a.jsx)("footer",{className:"footer section section__footer",children:Object(a.jsx)("p",{className:"section__text",children:"\xa9 2020 Mesto Russia"})})};var g=function(e){var t=e.name,n=e.title,c=e.value,o=e.isOpen,s=e.onClose,i=e.handleSubmit,r=e.children,u=e.formValid;return Object(a.jsx)("section",{className:"popup section__popup popup_type_".concat(t," ").concat(o?"popup_opened":""),children:Object(a.jsx)("div",{className:"popup__container",children:Object(a.jsxs)("form",{name:t,className:"popup__form popup__form_type_".concat(t),noValidate:!0,onSubmit:i,children:[Object(a.jsx)("h2",{className:"popup__heading section__subtitle",children:n}),Object(a.jsx)("fieldset",{className:"popup__fields",children:r}),Object(a.jsx)("input",{name:"save-button",type:"submit",value:c,className:"popup__save-button ".concat(u?"":"popup__save-button_invalid"),disabled:!u}),Object(a.jsx)("button",{name:"close-button",type:"button",className:"popup__close-button buttons",onClick:s})]})})})};var v=function(e){var t=e.isOpen,n=e.onClose,o=e.onUpdateUser,s=e.valueInput,i=e.nameError,r=e.descriptionError,u=e.handleChangeName,p=e.handleChangeDescription,d=e.formValid,j=Object(c.useState)(""),b=Object(l.a)(j,2),h=b[0],f=b[1],O=Object(c.useState)(""),_=Object(l.a)(O,2),v=_[0],x=_[1],C=Object(c.useContext)(m);return Object(c.useEffect)((function(){f(C.name),x(C.about)}),[t,C]),Object(a.jsxs)(g,{name:"popup-edit-profile",title:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u0440\u043e\u0444\u0438\u043b\u044c",value:s,isOpen:t,onClose:n,handleSubmit:function(e){e.preventDefault(),o({name:h,about:v})},formValid:d,children:[Object(a.jsx)("input",{name:"name",type:"text",value:h||"",onChange:function(e){u(e),f(e.target.value)},className:"popup__input popup__input_name ".concat(i?"popup__input_state_invalid":""),id:"user-name",minLength:"2",maxLength:"40",required:!0,autoComplete:"off"}),Object(a.jsx)("span",{id:"user-name-error",className:"error",children:i}),Object(a.jsx)("input",{name:"job",type:"text",value:v||"",onChange:function(e){p(e),x(e.target.value)},className:"popup__input popup__input_job ".concat(r?"popup__input_state_invalid":""),id:"about",minLength:"2",maxLength:"200",required:!0,autoComplete:"off"}),Object(a.jsx)("span",{id:"about-error",className:"error",children:r})]})};var x=function(e){var t=e.isOpen,n=e.onClose,o=e.onUpdateAvatar,s=e.valueInput,i=e.descriptionError,r=e.handleChangeLinks,u=e.formValid,l=Object(c.useRef)();return Object(c.useEffect)((function(){l.current.value=""}),[t]),Object(a.jsxs)(g,{name:"popup-update-avatar",title:"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0430\u0432\u0430\u0442\u0430\u0440",value:s,isOpen:t,onClose:n,handleSubmit:function(e){e.preventDefault(),o({avatar:l.current.value})},formValid:u,children:[Object(a.jsx)("input",{name:"link",type:"url",placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0443",className:"popup__input popup__input_link ".concat(i?"popup__input_state_invalid":""),required:!0,autoComplete:"off",ref:l,onChange:function(e){r(e)}}),Object(a.jsx)("span",{className:"error",id:"link-error",children:i})]})};var C=function(e){var t=e.card,n=e.onClose;return Object(a.jsx)("section",{className:"popup section__popup popup_type_popup-gallery ".concat(t?"popup_opened":""),children:Object(a.jsxs)("div",{className:"popup__gallery",children:[Object(a.jsx)("img",{src:t.link,alt:t.name,className:"popup__image"}),Object(a.jsx)("p",{className:"popup__title",children:t.name}),Object(a.jsx)("button",{name:"close-button",type:"button",className:"popup__close-button buttons",onClick:n})]})})},N=n(15),k=n(16),y=new(function(){function e(t){var n=t.baseUrl,a=t.headers;Object(N.a)(this,e),this._url=n,this._headers=a}return Object(k.a)(e,[{key:"getInitialCards",value:function(){var e=this;return fetch("".concat(this._url,"/cards"),{method:"GET",headers:this._headers}).then((function(t){return e._addResult(t)}))}},{key:"addNewCard",value:function(e,t,n){var a=this;return fetch("".concat(this._url,"/cards"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"".concat(n)},body:JSON.stringify({name:e,link:t})}).then((function(e){return a._addResult(e)}))}},{key:"changeLikeCardStatus",value:function(e,t,n){var a=this;return t?fetch("".concat(this._url,"/cards/likes/").concat(e),{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"".concat(n)}}).then((function(e){return a._addResult(e)})):fetch("".concat(this._url,"/cards/likes/").concat(e),{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"".concat(n)}}).then((function(e){return a._addResult(e)}))}},{key:"deleteCard",value:function(e,t){var n=this;return fetch("".concat(this._url,"/cards/").concat(e),{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"".concat(t)}}).then((function(e){return n._addResult(e)}))}},{key:"getUserInfo",value:function(e){var t=this;return fetch("".concat(this._url,"/users/me"),{method:"GET",headers:{"Content-Type":"application/json",Authorization:"".concat(e)}}).then((function(e){return t._addResult(e)}))}},{key:"setUserInfo",value:function(e,t,n){var a=this;return fetch("".concat(this._url,"/users/me"),{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:"".concat(n)},body:JSON.stringify({name:e,about:t})}).then((function(e){return a._addResult(e)}))}},{key:"setUserAvatar",value:function(e,t){var n=this;return fetch("".concat(this._url,"/users/me/avatar"),{method:"PATCH",headers:{"Content-Type":"application/json",Authorization:"".concat(t)},body:JSON.stringify({avatar:e})}).then((function(e){return n._addResult(e)}))}},{key:"_addResult",value:function(e){return e.ok?e.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e.status))}}]),e}())({baseUrl:"https://api.proofblame.nomoredomains.icu",headers:{"Content-Type":"application/json",Authorization:"".concat(localStorage.getItem("jwt"))}});var S=function(e){var t=e.isOpen,n=e.onClose,c=e.onCardDelete,o=e.card,s=e.valueInput,i=e.formValid;return Object(a.jsx)(g,{name:"popup-confirm",title:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b?",value:s,isOpen:t,onClose:n,handleSubmit:function(e){e.preventDefault(),c(o)},formValid:i})};var E=function(e){var t=e.isOpen,n=e.onClose,o=e.onAddPlace,s=e.valueInput,i=e.nameError,r=e.descriptionError,u=e.handleChangeName,p=e.handleChangeLinks,d=e.formValid,j=Object(c.useState)(),b=Object(l.a)(j,2),m=b[0],h=b[1],f=Object(c.useState)(),O=Object(l.a)(f,2),_=O[0],v=O[1];return Object(c.useEffect)((function(){h(""),v("")}),[t]),Object(a.jsxs)(g,{name:"popup-add-card",title:"\u041d\u043e\u0432\u043e\u0435 \u043c\u0435\u0441\u0442\u043e",value:s,isOpen:t,onClose:n,handleSubmit:function(e){e.preventDefault(),o({name:m,link:_})},formValid:d,nameError:i,descriptionError:r,children:[Object(a.jsx)("input",{name:"name",type:"text",value:m||"",placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",className:"popup__input popup__input_title ".concat(i?"popup__input_state_invalid":""),minLength:"2",maxLength:"30",required:!0,id:"name-card",autoComplete:"off",onChange:function(e){u(e),h(e.target.value)}}),Object(a.jsx)("span",{id:"name-card-error",className:"error",children:i}),Object(a.jsx)("input",{name:"link",type:"url",value:_||"",placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0443",className:"popup__input popup__input_link ".concat(r?"popup__input_state_invalid":""),required:!0,autoComplete:"off",onChange:function(e){p(e),v(e.target.value)}}),Object(a.jsx)("span",{className:"error",id:"link-error",children:r})]})},w=n(11);var I=function(e){var t=[e.isOpen,e.onClose],n=t[0],c=t[1];return o.a.useEffect((function(){if(n){var e=function(e){"Escape"===e.key&&c()};return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}}}),[n,c]),Object(a.jsx)("section",{className:"popup section__popup popup_".concat(e.name," ").concat(n&&"popup_opened"),onMouseDown:function(e){return e.target.classList.contains("popup")&&c()},children:Object(a.jsxs)("div",{className:"popup__container",children:[e.children,Object(a.jsx)("button",{name:"close-button",type:"button",className:"popup__close-button buttons",onClick:c})]})})},L=n.p+"static/media/register-ok.1b6082f8.svg",T=n.p+"static/media/register-fail.df8eddf6.svg";var D=function(e){return Object(a.jsxs)(I,{isOpen:e.isOpen,onClose:e.onClose,name:e.name,children:[Object(a.jsx)("img",{src:e.status?L:T,alt:"",className:"popup__info-image"}),Object(a.jsx)("p",{className:"popup__info-message",children:e.children})]})},R=function(e){var t=Object(c.useState)({email:"",password:""}),n=Object(l.a)(t,2),o=n[0],s=n[1],i=Object(c.useState)(""),r=Object(l.a)(i,2),j=r[0],b=r[1],m=Object(c.useState)(!1),h=Object(l.a)(m,2),f=h[0],O=h[1],_=Object(c.useState)(!1),g=Object(l.a)(_,2),v=g[0],x=g[1],C=Object(p.g)();function N(e){var t=e.target,n=t.name,a=t.value;s(Object(u.a)(Object(u.a)({},o),{},Object(w.a)({},n,a)))}return Object(c.useEffect)((function(){e.loggedIn&&C.push("/")}),[e.loggedIn,C]),Object(a.jsxs)("div",{className:"register",children:[Object(a.jsx)("h2",{className:"register__heading",children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"}),Object(a.jsxs)("form",{onSubmit:function(t){t.preventDefault(),e.onRegister(o.email,o.password).then((function(){x(!0),b("\u0412\u044b \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043b\u0438\u0441\u044c!")})).catch((function(){b("\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a! \u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0451 \u0440\u0430\u0437.")})).finally((function(){O(!0)}))},className:"register__form",autoComplete:"off",children:[Object(a.jsx)("input",{name:"email",type:"email",value:o.email,onChange:N,className:"register__input",placeholder:"Email",autoComplete:"email"}),Object(a.jsx)("input",{name:"password",type:"password",value:o.password,onChange:N,className:"register__input",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",autoComplete:"new-password"}),Object(a.jsx)("button",{type:"submit",className:"register__submit-button",children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})]}),Object(a.jsxs)("p",{className:"register__title",children:["\u0423\u0436\u0435 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043b\u0438\u0441\u044c?",Object(a.jsx)(d.b,{className:"register__link",to:"/sign-in",children:"\u0412\u043e\u0439\u0442\u0438"})]}),Object(a.jsx)(D,{isOpen:f,onClose:function(){O(!1),v&&C.push("/sign-in")},name:"register",status:v,children:j})]})};var A=function(e){var t=Object(c.useState)({currentEmail:"",currentPassword:""}),n=Object(l.a)(t,2),o=n[0],s=n[1],i=Object(c.useState)(""),r=Object(l.a)(i,2),d=r[0],j=r[1],b=Object(c.useState)(!1),m=Object(l.a)(b,2),h=m[0],f=m[1],O=Object(c.useState)(!1),_=Object(l.a)(O,2),g=_[0],v=_[1],x=Object(p.g)();function C(e){var t=e.target,n=t.name,a=t.value;s(Object(u.a)(Object(u.a)({},o),{},Object(w.a)({},n,a)))}return Object(c.useEffect)((function(){e.loggedIn&&x.push("/")}),[e.loggedIn,x]),Object(a.jsxs)("div",{className:"register",children:[Object(a.jsx)("h2",{className:"register__heading",children:"\u0412\u0445\u043e\u0434"}),Object(a.jsxs)("form",{className:"register__form",onSubmit:function(t){t.preventDefault(),e.onLogin(o.currentEmail,o.currentPassword).then((function(){v(!0),j("\u0412\u044b \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0432\u043e\u0448\u043b\u0438!")})).catch((function(){j("\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a! \u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0451 \u0440\u0430\u0437.")})).finally((function(){f(!0)}))},children:[Object(a.jsx)("input",{type:"email",name:"currentEmail",className:"register__input",placeholder:"Email",value:o.currentEmail,onChange:C,autoComplete:"email"}),Object(a.jsx)("input",{type:"password",name:"currentPassword",className:"register__input",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",value:o.currentPassword,onChange:C,autoComplete:"current-password"}),Object(a.jsx)("button",{className:"register__submit-button",children:"\u0412\u043e\u0439\u0442\u0438"})]}),Object(a.jsx)(D,{isOpen:h,onClose:function(){f(!1),g&&e.checkToken()},name:"login",status:g,children:d})]})},P=n(25),U=function(e){var t=e.component,n=Object(P.a)(e,["component"]);return Object(a.jsx)(p.b,{children:function(){return n.loggedIn?Object(a.jsx)(t,Object(u.a)({},n)):Object(a.jsx)(p.a,{to:"./sign-in"})}})},V=function(e){return Object(a.jsx)(p.b,{children:function(){return e.isChecked?e.children:Object(a.jsx)("p",{children:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430..."})}})},z=new(function(){function e(t){Object(N.a)(this,e),this.baseURL=t}return Object(k.a)(e,[{key:"_getResponseData",value:function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(new Error(e.message||e.error))}))}},{key:"register",value:function(e,t){return fetch("".concat(this.baseURL,"/signup"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:t,email:e})}).then(this._getResponseData)}},{key:"login",value:function(e,t){return fetch("".concat(this.baseURL,"/signin"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:t,email:e})}).then(this._getResponseData)}},{key:"getUserData",value:function(e){return fetch("".concat(this.baseURL,"/users/me"),{headers:{"Content-Type":"application/json",Authorization:"".concat(e)}}).then(this._getResponseData)}}]),e}())("https://api.proofblame.nomoredomains.icu");var J=function(){var e=Object(c.useState)(!1),t=Object(l.a)(e,2),n=t[0],o=t[1],s=Object(c.useState)(!1),i=Object(l.a)(s,2),d=i[0],j=i[1],h=Object(c.useState)(!1),f=Object(l.a)(h,2),g=f[0],N=f[1],k=Object(c.useState)(!1),w=Object(l.a)(k,2),I=w[0],L=w[1],T=Object(c.useState)(!1),D=Object(l.a)(T,2),P=D[0],J=D[1],M=Object(c.useState)(!1),q=Object(l.a)(M,2),F=q[0],B=q[1],G=Object(c.useState)({_id:null,avatar:""}),H=Object(l.a)(G,2),K=H[0],Q=H[1],W=Object(c.useState)([]),X=Object(l.a)(W,2),Y=X[0],Z=X[1],$=Object(c.useState)({submit:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",confirm:"\u0414\u0430"}),ee=Object(l.a)($,2),te=ee[0],ne=ee[1],ae=Object(c.useState)(""),ce=Object(l.a)(ae,2),oe=ce[0],se=ce[1],ie=Object(c.useState)(""),re=Object(l.a)(ie,2),ue=re[0],le=re[1],pe=Object(c.useState)(!1),de=Object(l.a)(pe,2),je=de[0],be=de[1],me=Object(c.useState)(!1),he=Object(l.a)(me,2),fe=he[0],Oe=he[1],_e=Object(c.useState)(!1),ge=Object(l.a)(_e,2),ve=ge[0],xe=ge[1],Ce=Object(c.useState)(!1),Ne=Object(l.a)(Ce,2),ke=Ne[0],ye=Ne[1],Se=Object(c.useState)(!1),Ee=Object(l.a)(Se,2),we=Ee[0],Ie=Ee[1],Le=Object(p.g)();function Te(){var e=localStorage.getItem("jwt");e?(y.getUserInfo(e).then((function(e){ye(!0),Le.push("/"),Q(e.data)})).catch((function(e){return console.error(e.message)})),y.getInitialCards().then((function(e){Z(e)})).catch((function(e){console.log(e)})).finally((function(){Ie(!0)}))):Ie(!0)}function De(e){e.target.validity.valid?(se(""),Oe(!0)):(se(e.target.validationMessage),Oe(!1))}function Re(e){var t=/(http)?s?:?(\/\/[^"']*\.(?:png|jpg|jpeg|gif|png|svg))/gi.test(e.target.value);e.target.validity.valid&&t?(le(""),xe(!0)):(le(e.target.validationMessage||"\u041d\u0435\u043a\u043e\u0440\u0440\u0435\u043a\u0442\u043d\u0430\u044f \u0441\u0441\u044b\u043b\u043a\u0430"),xe(!1))}function Ae(){o(!1),j(!1),N(!1),J(!1),L(!1),le(""),se("")}return Object(c.useEffect)((function(){Te()}),[]),Object(c.useEffect)((function(){return be(!(!fe||!ve)),function(){be(!1)}}),[fe,ve]),Object(c.useEffect)((function(){function e(e){"Escape"===e.key&&Ae()}function t(e){var t=document.querySelector(".popup_opened");e.target===t&&Ae()}return document.addEventListener("click",t),document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e),document.removeEventListener("click",t)}}),[]),Object(a.jsx)(m.Provider,{value:K,children:Object(a.jsxs)("div",{className:"root",children:[Object(a.jsx)(b,{loggedIn:ke,email:K.email,onSignOut:function(){ye(!1),Q({_id:null,avatar:""}),localStorage.removeItem("jwt")}}),Object(a.jsx)(V,{isChecked:we,children:Object(a.jsxs)(p.d,{children:[Object(a.jsx)(U,{loggedIn:ke,exact:!0,path:"/",component:O,onEditProfile:function(){o(!0),Oe(!0),xe(!0)},onAddPlace:function(){j(!0),Oe(!1),xe(!1)},onEditAvatar:function(){N(!0),Oe(!0)},onCardClick:function(e){J(e)},cards:Y,onCardLike:function(e){var t=e.likes.some((function(e){return e===K._id})),n=localStorage.getItem("jwt");n&&y.changeLikeCardStatus(e._id,!t,n).then((function(t){var n=Y.map((function(n){return n._id===e._id?t:n}));Z(n)})).catch((function(e){console.log(e)}))},onConfirmDelete:function(e){L(!0),B(e),Oe(!0),xe(!0)},handleChangeName:De}),Object(a.jsx)(p.b,{path:"/sign-up",children:Object(a.jsx)(R,{onRegister:function(e,t){return z.register(e,t)},loggedIn:ke})}),Object(a.jsx)(p.b,{path:"/sign-in",children:Object(a.jsx)(A,{onLogin:function(e,t){return z.login(e,t).then((function(e){localStorage.setItem("jwt",e.token)}))},loggedIn:ke,checkToken:Te})})]})}),Object(a.jsx)(_,{}),Object(a.jsx)(S,{isOpen:I,onClose:Ae,onCardDelete:function(e){ne(Object(u.a)(Object(u.a)({},te),{},{confirm:"\u0423\u0434\u0430\u043b\u0435\u043d\u0438\u0435..."}));var t=localStorage.getItem("jwt");t&&y.deleteCard(e._id,t).then((function(){var t=Y.filter((function(t){return t._id!==e._id}));Z(t)})).then((function(){Ae(),ne(Object(u.a)(Object(u.a)({},te),{},{confirm:"\u0414\u0430"}))})).catch((function(e){console.log(e)}))},card:F,valueInput:te.confirm,formValid:je}),Object(a.jsx)(E,{isOpen:d,onClose:Ae,onAddPlace:function(e){var t=e.name,n=e.link;ne(Object(u.a)(Object(u.a)({},te),{},{submit:"\u0421\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0435..."}));var a=localStorage.getItem("jwt");a&&y.addNewCard(t,n,a).then((function(e){Z([e.data].concat(Object(r.a)(Y)))})).then((function(){ne(Object(u.a)(Object(u.a)({},te),{},{submit:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})),Ae()})).catch((function(e){console.log(e)}))},valueInput:te.submit,nameError:oe,descriptionError:ue,handleChangeName:De,handleChangeLinks:Re,formValid:je}),Object(a.jsx)(x,{isOpen:g,onClose:Ae,onUpdateAvatar:function(e){var t=e.avatar;ne(Object(u.a)(Object(u.a)({},te),{},{submit:"\u0421\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0435..."}));var n=localStorage.getItem("jwt");n&&y.setUserAvatar(t,n).then((function(){Q(Object(u.a)(Object(u.a)({},K),{},{avatar:t}))})).then((function(){Ae(),ne(Object(u.a)(Object(u.a)({},te),{},{submit:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"}))})).catch((function(e){console.log(e)}))},valueInput:te.submit,descriptionError:ue,handleChangeLinks:Re,formValid:je}),Object(a.jsx)(v,{isOpen:n,onClose:Ae,onUpdateUser:function(e){var t=e.name,n=e.about;ne(Object(u.a)(Object(u.a)({},te),{},{submit:"\u0421\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0435..."}));var a=localStorage.getItem("jwt");a&&y.setUserInfo(t,n,a).then((function(){Q(Object(u.a)(Object(u.a)({},K),{},{name:t,about:n}))})).then((function(){Ae(),ne(Object(u.a)(Object(u.a)({},te),{},{submit:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"}))})).catch((function(e){console.log(e)}))},valueInput:te.submit,nameError:oe,descriptionError:ue,handleChangeName:De,handleChangeDescription:function(e){e.target.validity.valid?(le(""),xe(!0)):(le(e.target.validationMessage),xe(!1))},formValid:je}),Object(a.jsx)(C,{card:P,onClose:Ae})]})})},M=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,38)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,o=t.getLCP,s=t.getTTFB;n(e),a(e),c(e),o(e),s(e)}))};i.a.render(Object(a.jsx)(o.a.StrictMode,{children:Object(a.jsx)(d.a,{children:Object(a.jsx)(J,{})})}),document.getElementById("root")),M()}},[[37,1,2]]]);
//# sourceMappingURL=main.24d57eb6.chunk.js.map